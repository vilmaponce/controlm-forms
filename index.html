<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ABM Jobs - Control-M</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body { 
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    /* COLORES YPF: Azul #0033A0, Blanco #FFFFFF, Gris #6C757D */
    background: linear-gradient(135deg, #0033A0 0%, #0047CC 50%, #003399 100%);
    min-height: 100vh;
    padding: 20px;
    color: #333;
}
h1 { 
    text-align: center;
    color: white;
    font-size: 2.2rem;
    margin-bottom: 10px;
    text-shadow: 2px 2px 6px rgba(0, 0, 0, 0.3);
    font-weight: 900;
    letter-spacing: 1px;
}
.importante {
    text-align: center;
    color: white;
    font-size: 1.1rem;
    margin-bottom: 20px;
    background: rgba(255, 255, 255, 0.15);
    padding: 15px;
    border-radius: 10px;
    border: 2px solid rgba(255, 255, 255, 0.3);
    backdrop-filter: blur(10px);
}
.importante .asterisco {
    color: #FFD700;
    font-weight: bold;
    font-size: 1.3rem;
}
h2 { 
    text-align: center;
    color: white;
    font-size: 1.3rem;
    margin-bottom: 20px;
    font-weight: 600;
}

/* SISTEMA DE PASOS */
.paso-container {
    max-width: 900px;
    margin: 30px auto;
    padding: 40px;
    background: white;
    border-radius: 15px;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
    animation: fadeIn 0.4s ease;
    border-top: 5px solid #0033A0;
}

.paso-container h2 {
    color: #0033A0;
    text-align: center;
    margin-bottom: 30px;
    font-size: 1.8rem;
    text-shadow: none;
    font-weight: 700;
}

.opciones-paso {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 25px;
    margin-top: 30px;
}

.btn-opcion {
    background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
    border: 3px solid #0033A0;
    border-radius: 15px;
    padding: 40px 20px;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 15px;
    font-family: inherit;
    box-shadow: 0 4px 15px rgba(0, 51, 160, 0.2);
    position: relative;
    overflow: hidden;
}

.btn-opcion::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, #0033A0 0%, #0047CC 100%);
    opacity: 0;
    transition: opacity 0.3s ease;
    z-index: 0;
}

.btn-opcion:hover::before {
    opacity: 1;
}

.btn-opcion:hover {
    transform: translateY(-8px);
    box-shadow: 0 12px 35px rgba(0, 51, 160, 0.4);
    border-color: #0033A0;
}

.btn-opcion .icono {
    font-size: 3.5rem;
    position: relative;
    z-index: 1;
    transition: transform 0.3s ease;
    filter: grayscale(0);
}

.btn-opcion:hover .icono {
    transform: scale(1.15);
    filter: brightness(1.2);
}

.btn-opcion .texto {
    font-size: 1.1rem;
    font-weight: 700;
    color: #0033A0;
    position: relative;
    z-index: 1;
    transition: color 0.3s ease;
}

.btn-opcion:hover .texto {
    color: white;
}

.breadcrumb {
    text-align: center;
    margin-bottom: 25px;
    padding: 15px 20px;
    background: linear-gradient(135deg, #e8f0ff 0%, #d4e4ff 100%);
    border-radius: 10px;
    font-size: 1rem;
    border: 2px solid rgba(0, 51, 160, 0.2);
}

.breadcrumb-item {
    color: #0033A0;
    cursor: pointer;
    transition: all 0.2s;
    padding: 5px 10px;
    border-radius: 5px;
    font-weight: 600;
}

.breadcrumb-item:hover {
    background: rgba(0, 51, 160, 0.1);
    transform: scale(1.05);
}

.breadcrumb-item strong {
    color: #0047CC;
    text-transform: uppercase;
    font-weight: 900;
}

.separador {
    margin: 0 10px;
    color: #6C757D;
    font-weight: bold;
}

.custom-form {
    max-width: 900px;
    margin: 0 auto;
    background: white;
    padding: 35px;
    border-radius: 15px;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
    animation: fadeIn 0.4s ease;
    border-top: 5px solid #0033A0;
}
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}
.custom-form h2 {
    color: #0033A0;
    text-align: left;
    margin-bottom: 25px;
    padding-bottom: 15px;
    border-bottom: 3px solid #0033A0;
    text-shadow: none;
    font-weight: 700;
}
.custom-form label {
    display: block;
    margin-bottom: 15px;
    font-weight: 600;
    color: #2c3e50;
    font-size: 0.95rem;
}
.requerido {
    color: #dc3545;
    font-weight: bold;
    margin-left: 3px;
}
.custom-form input[type="text"],
.custom-form input[type="date"],
.custom-form input[type="time"],
.custom-form input[type="number"],
.custom-form input[type="password"],
.custom-form select,
.custom-form textarea {
    width: 100%;
    padding: 12px;
    margin-top: 5px;
    border: 2px solid #e0e0e0;
    border-radius: 8px;
    font-size: 1rem;
    font-family: inherit;
    transition: all 0.3s ease;
    background: #f8f9fa;
}
.custom-form input:focus,
.custom-form select:focus,
.custom-form textarea:focus {
    outline: none;
    border-color: #0033A0;
    background: white;
    box-shadow: 0 0 0 3px rgba(0, 51, 160, 0.1);
}
.custom-form textarea {
    min-height: 100px;
    resize: vertical;
}
.ciclico-campos {
    background: #e8f0ff;
    padding: 20px;
    border-radius: 10px;
    margin: 15px 0;
    border-left: 4px solid #0033A0;
}
.custom-form input[required],
.custom-form textarea[required] {
    border-left: 4px solid #dc3545;
}
.custom-form button[type="submit"] {
    width: 100%;
    padding: 16px;
    margin-top: 25px;
    background: linear-gradient(135deg, #0033A0 0%, #0047CC 100%);
    color: white;
    border: none;
    border-radius: 10px;
    font-size: 1.1rem;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(0, 51, 160, 0.4);
    text-transform: uppercase;
    letter-spacing: 1px;
}
.custom-form button[type="submit"]:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 25px rgba(0, 51, 160, 0.5);
    background: linear-gradient(135deg, #001f66 0%, #0033A0 100%);
}
.section-title {
    margin-top: 25px;
    margin-bottom: 15px;
    font-size: 1.1rem;
    color: #0033A0;
    font-weight: 700;
    padding: 12px;
    background: linear-gradient(135deg, #e8f0ff 0%, #f0f7ff 100%);
    border-radius: 8px;
    border-left: 5px solid #0033A0;
}

.campos-dinamicos {
    background: #f8f9fa;
    padding: 20px;
    border-radius: 10px;
    margin: 20px 0;
    border: 2px dashed #0033A0;
}
.fila-dinamica {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr 1fr 50px;
    gap: 10px;
    margin-bottom: 15px;
    padding: 15px;
    background: white;
    border-radius: 8px;
    border: 1px solid #e0e0e0;
}
.btn-agregar {
    background: #28a745;
    color: white;
    border: none;
    padding: 12px 20px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 600;
    margin-top: 10px;
    transition: all 0.3s;
}
.btn-agregar:hover {
    background: #218838;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(40, 167, 69, 0.3);
}
.btn-eliminar {
    background: #dc3545;
    color: white;
    border: none;
    padding: 10px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.3s;
    font-size: 1.2rem;
}
.btn-eliminar:hover {
    background: #c82333;
    transform: scale(1.05);
}

.btn-volver {
    display: inline-block;
    padding: 12px 25px;
    margin-bottom: 20px;
    background: #6C757D;
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 600;
    font-size: 1rem;
    transition: all 0.3s;
    text-decoration: none;
}

.btn-volver:hover {
    background: #5a6268;
    transform: translateX(-3px);
    box-shadow: 0 4px 12px rgba(108, 117, 125, 0.3);
}

.btn-volver::before {
    content: '‚Üê ';
    margin-right: 5px;
}
.resumen-seleccion {
    max-width: 900px;
    margin: 20px auto;
    padding: 25px;
    background: linear-gradient(135deg, #0033A0 0%, #0047CC 100%);
    border-radius: 15px;
    box-shadow: 0 8px 25px rgba(0, 51, 160, 0.4);
    display: none;
    animation: fadeIn 0.4s ease;
}

.resumen-seleccion.visible {
    display: block;
}

.resumen-contenido {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: 15px;
}

.resumen-items {
    display: flex;
    gap: 20px;
    flex-wrap: wrap;
    flex: 1;
}

.resumen-item {
    background: rgba(255, 255, 255, 0.2);
    padding: 12px 25px;
    border-radius: 10px;
    color: white;
    font-weight: 600;
    backdrop-filter: blur(10px);
    border: 2px solid rgba(255, 255, 255, 0.3);
}

.resumen-item .label {
    font-size: 0.85rem;
    opacity: 0.9;
    margin-bottom: 5px;
}

.resumen-item .valor {
    font-size: 1.2rem;
    text-transform: uppercase;
    font-weight: 700;
}

.resumen-btn-volver {
    background: white;
    color: #0033A0;
    border: none;
    padding: 12px 25px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 700;
    transition: all 0.3s;
}

.resumen-btn-volver:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(255, 255, 255, 0.4);
}

.user-info {
    background: rgba(255, 255, 255, 0.15);
    backdrop-filter: blur(10px);
    border-radius: 10px;
    margin-bottom: 20px;
    border: 2px solid rgba(255, 255, 255, 0.3);
}

.btn-logout {
    background: #dc3545;
    color: white;
    border: none;
    padding: 8px 15px;
    border-radius: 5px;
    cursor: pointer;
    margin-left: 15px;
    font-weight: 600;
    transition: all 0.3s;
}

.btn-logout:hover {
    background: #c82333;
    transform: translateY(-2px);
}

@media (max-width: 768px) {
    .resumen-contenido {
        flex-direction: column;
        align-items: stretch;
    }
    
    .resumen-items {
        flex-direction: column;
        gap: 10px;
    }
}
@media (max-width: 768px) {
    body { padding: 10px; }
    h1 { font-size: 1.5rem; }
    .custom-form { padding: 20px; }
    .paso-container { padding: 25px; }
    .fila-dinamica, .opciones-paso {
        grid-template-columns: 1fr;
    }
    .btn-opcion {
        padding: 30px 15px;
    }
}
</style>
</head>
<body>

<h1>Plantillas de alta, baja y modificaci√≥n en Jobs de Control-M</h1>
<h1>ADMINISTRACI√ìN CONTROL-M</h1>
<div class="importante">
    <strong>IMPORTANTE:</strong> Los campos marcados con <span class="asterisco">(*)</span> son obligatorios
</div>

<!-- PASO 1: TIPO DE SOLICITUD -->
<div id="paso-1" class="paso-container">
    <h2>Paso 1 de 3: Seleccione el tipo de solicitud</h2>
    <div class="opciones-paso">
        <button type="button" class="btn-opcion" onclick="seleccionarTipoSolicitud('alta')">
            <span class="icono">‚ûï</span>
            <span class="texto">ALTA</span>
        </button>
        <button type="button" class="btn-opcion" onclick="seleccionarTipoSolicitud('baja')">
            <span class="icono">‚ûñ</span>
            <span class="texto">BAJA</span>
        </button>
        <button type="button" class="btn-opcion" onclick="seleccionarTipoSolicitud('modificacion')">
            <span class="icono">‚úèÔ∏è</span>
            <span class="texto">MODIFICACI√ìN</span>
        </button>
    </div>
</div>

<!-- PASO 2: AMBIENTE -->
<div id="paso-2" class="paso-container" style="display:none;">
    <h2>Paso 2 de 3: Seleccione el ambiente</h2>
    <div class="breadcrumb">
        <span class="breadcrumb-item" onclick="volverPaso(1)">Tipo: <strong id="tipo-selected"></strong></span>
    </div>
    <div class="opciones-paso">
        <button type="button" class="btn-opcion" onclick="seleccionarAmbiente('desarrollo')">
            <span class="icono">üõ†Ô∏è</span>
            <span class="texto">DESARROLLO</span>
        </button>
        <button type="button" class="btn-opcion" onclick="seleccionarAmbiente('testing')">
            <span class="icono">üß™</span>
            <span class="texto">TESTING</span>
        </button>
        <button type="button" class="btn-opcion" onclick="seleccionarAmbiente('produccion')">
            <span class="icono">üöÄ</span>
            <span class="texto">PRODUCCI√ìN</span>
        </button>
        <button type="button" class="btn-opcion" onclick="seleccionarAmbiente('laboratorio')">
            <span class="icono">üî¨</span>
            <span class="texto">LABORATORIO</span>
        </button>
    </div>
</div>

<!-- PASO 3: TIPO DE JOB -->
<div id="paso-3" class="paso-container" style="display:none;">
    <h2>Paso 3 de 3: Seleccione el tipo de job</h2>
    <div class="breadcrumb">
        <span class="breadcrumb-item" onclick="volverPaso(1)">Tipo: <strong id="tipo-selected-2"></strong></span>
        <span class="separador">‚Üí</span>
        <span class="breadcrumb-item" onclick="volverPaso(2)">Ambiente: <strong id="ambiente-selected"></strong></span>
    </div>
    <div class="opciones-paso">
        <button type="button" class="btn-opcion" onclick="seleccionarJob('os')">
            <span class="icono">üíª</span>
            <span class="texto">SCRIPT / CMD</span>
        </button>
        <button type="button" class="btn-opcion" onclick="seleccionarJob('sap')">
            <span class="icono">üìä</span>
            <span class="texto">SAP</span>
        </button>
        <button type="button" class="btn-opcion" onclick="seleccionarJob('file-transfer')">
            <span class="icono">üìÅ</span>
            <span class="texto">FILE TRANSFER</span>
        </button>
        <button type="button" class="btn-opcion" onclick="seleccionarJob('database')">
            <span class="icono">üóÑÔ∏è</span>
            <span class="texto">DATABASE</span>
        </button>
        <button type="button" class="btn-opcion" onclick="seleccionarJob('webjob')">
            <span class="icono">üåê</span>
            <span class="texto">WEBJOB</span>
        </button>
        <button type="button" class="btn-opcion" onclick="seleccionarJob('masiva')">
            <span class="icono">üì¶</span>
            <span class="texto">MASIVA</span>
        </button>
    </div>
</div>

<!-- RESUMEN DE SELECCI√ìN -->
<div id="resumen-seleccion" class="resumen-seleccion">
    <div class="resumen-contenido">
        <div class="resumen-items">
            <div class="resumen-item">
                <div class="label">Tipo de Solicitud</div>
                <div class="valor" id="resumen-tipo"></div>
            </div>
            <div class="resumen-item">
                <div class="label">Ambiente</div>
                <div class="valor" id="resumen-ambiente"></div>
            </div>
            <div class="resumen-item">
                <div class="label">Tipo de Job</div>
                <div class="valor" id="resumen-job"></div>
            </div>
        </div>
        <button type="button" class="resumen-btn-volver" onclick="volverAlPaso3()">
            ‚Üê Cambiar selecci√≥n
        </button>
    </div>
</div>
<!-- FORMULARIO OS COMPLETO -->
<button type="button" class="btn-volver" onclick="volverAlPaso3()">Volver</button>
<form id="form-os" action="/formularios/os" method="post" class="custom-form" style="display:none;">
    <input type="hidden" name="tipo_job" value="os">
    <h2>Campo SCRIPT / CMD</h2>
    <button type="button" class="btn-volver" onclick="volverAlPaso3()">Volver</button>
    
    <label>Tipo de solicitud:<span class="requerido">(*)</span>
        <select name="tipo_solicitud_os">
            <option value="">Seleccionar...</option>
            <option value="alta">Alta</option>
            <option value="baja">Baja</option>
            <option value="modificacion">Modificaci√≥n</option>
        </select>
    </label>
    
    <label>Ambiente:<span class="requerido">(*)</span>
        <select name="ambiente_os">
            <option value="">Seleccionar...</option>
            <option value="desarrollo">Desarrollo</option>
            <option value="testing">Testing</option>
            <option value="produccion">Producci√≥n</option>
        </select>
    </label>
    
    <label>Ticket en Service Now: <input type="text" name="sn_os"></label>
    <label>Jobname: <input type="text" name="jobname_os"></label>
    <label>Descripci√≥n del proceso<span class="requerido">(*)</span> <input type="text" name="descripcion_os"></label>
    <label>Nombre del servidor<span class="requerido">(*)</span> <input type="text" name="servidor_os" required></label>
    <label>Usuario ejecutante <input type="text" name="usuario_os"></label>
    <label>Instancia de aplicaci√≥n en SN <span class="requerido">(*)</span> <input type="text" name="instancia_os"></label>
    <label>Nombre del proceso a ejecutar<span class="requerido">(*)</span> <input type="text" name="command_os" required></label>
    
    <div class="section-title">Frecuencia de ejecuci√≥n<span class="requerido">(*)</span></div>
    <label>D√≠as de la semana: <input type="text" name="dias_semana_os" placeholder="L,M,Mi,J,V"></label>
    <label>D√≠as del mes: <input type="text" name="dias_mes_os" placeholder="1,15,30"></label>
    <label>Mes/es:
        <select name="meses_os">
            <option value="">Todos</option>
            <option value="enero">Enero</option>
            <option value="febrero">Febrero</option>
            <option value="marzo">Marzo</option>
            <option value="abril">Abril</option>
            <option value="mayo">Mayo</option>
            <option value="junio">Junio</option>
            <option value="julio">Julio</option>
            <option value="agosto">Agosto</option>
            <option value="septiembre">Septiembre</option>
            <option value="octubre">Octubre</option>
            <option value="noviembre">Noviembre</option>
            <option value="diciembre">Diciembre</option>
        </select>
    </label>
    <label>Fecha √∫nica: <input type="date" name="fecha_unica_os"></label>
    <label>Hora: <input type="time" name="hora_os"></label>
    <label>C√≠clico:
        <select name="ciclico_os" class="ciclico-select">
            <option value="no">No</option>
            <option value="si">S√≠</option>
        </select>
    </label>
    <div class="ciclico-campos" style="display: none;">
        <label>Hora desde: <input type="time" name="hora_desde_os"></label>
        <label>Hora hasta: <input type="time" name="hora_hasta_os"></label>
        <label>Intervalo (minutos): <input type="number" name="intervalo_os" placeholder="30"></label>
        <label>Desde:
            <select name="desde_os">
                <option value="">Seleccionar...</option>
                <option value="fin">Fin</option>
                <option value="principio">Principio</option>
            </select>
        </label>
    </div>
    <label>Activo desde: <input type="date" name="activo_desde_os"></label>
    <label>Activo hasta: <input type="date" name="activo_hasta_os"></label>
    
    <label>Si tiene dependencias indicar cuales: 
        <textarea name="dependencias_os" placeholder="JOB.TO.JOB"></textarea>
    </label>
    
    <label>Criticidad:
        <select name="criticidad_os">
            <option value="">Seleccionar...</option>
            <option value="baja">Baja</option>
            <option value="media">Media</option>
            <option value="alta">Alta</option>
        </select>    
    </label>
    
    <div class="section-title">DOCUMENTACI√ìN <span class="requerido">(indicar un √∫nico grupo)</span></div>
    <label>Grupo responsable correo<span class="requerido">(*)</span> <input type="text" name="grupo_responsable_correo_os" required></label>
    <label>Grupo responsable Service Now: <input type="text" name="grupo_responsable_sn_os"></label>
    <label>Acci√≥n a seguir si cancela <span class="requerido">(*)IMPORTANTE: NO DERIVAR INCIDENTE-CERRAR EN OPERACIONES</span>
        <textarea name="accion_cancela_os" required></textarea>
    </label>
    <label>Observaciones / Datos Complementarios / Notas 
        <textarea name="observaciones_os"></textarea>
    </label>
    
    <button type="submit">Guardar</button>
</form>

<!-- FORMULARIO SAP COMPLETO -->

<form id="form-sap" action="/formularios/sap" method="post" class="custom-form" style="display:none;">
    <input type="hidden" name="tipo_job" value="sap">
    <h2>Campo SAP</h2>
    <button type="button" class="btn-volver" onclick="volverAlPaso3()">Volver</button>
    <label>Tipo de solicitud<span class="requerido">(*)</span>
        <select name="tipo_solicitud_sap">
            <option value="">Seleccionar...</option>
            <option value="alta">Alta</option>
            <option value="baja">Baja</option>
            <option value="modificacion">Modificaci√≥n</option>
        </select>
    </label>
    
    <label>Ambiente<span class="requerido">(*)</span>
        <select name="ambiente_sap">
            <option value="">Seleccionar...</option>
            <option value="desarrollo">Desarrollo</option>
            <option value="testing">Testing</option>
            <option value="produccion">Producci√≥n</option>
        </select>
    </label>
    
    <label>Ticket en Service Now: <input type="text" name="sn_sap"></label>
    <label>Jobname: <input type="text" name="jobname_sap"></label>
    <label>Descripci√≥n del proceso<span class="requerido">(*)</span><input type="text" name="descripcion_sap"></label>
    <label>Nombre del servidor<span class="requerido">(*)</span> <input type="text" name="servidor_sap" required></label>
    <label>Usuario ejecutante: <input type="text" name="usuario_sap"></label>
    <label>Instancia de aplicaci√≥n<span class="requerido">(*)</span> <input type="text" name="instancia_sap"></label>
    <label>Nombre del Proceso de SAP a Lanzar desde Control-M( Proceso a Ejecutar )<span class="requerido">(*)</span> <input type="text" name="command_sap" required></label>
    <label>Usuario en SAP: <input type="text" name="usuario_en_sap"></label>
    <label>Instancia/Mandante: <input type="text" name="mandante_sap"></label>
    <label>M√≥dulo: <input type="text" name="modulo_sap"></label>
    
    <div class="section-title">Frecuencia de ejecuci√≥n<span class="requerido">(*)</span></div>
    <label>D√≠as de la semana: <input type="text" name="dias_semana_sap" placeholder="L,M,Mi,J,V"></label>
    <label>D√≠as del mes: <input type="text" name="dias_mes_sap" placeholder="1,15,30"></label>
    <label>Mes/es:
        <select name="meses_sap">
            <option value="">Todos</option>
            <option value="enero">Enero</option>
            <option value="febrero">Febrero</option>
            <option value="marzo">Marzo</option>
            <option value="abril">Abril</option>
            <option value="mayo">Mayo</option>
            <option value="junio">Junio</option>
            <option value="julio">Julio</option>
            <option value="agosto">Agosto</option>
            <option value="septiembre">Septiembre</option>
            <option value="octubre">Octubre</option>
            <option value="noviembre">Noviembre</option>
            <option value="diciembre">Diciembre</option>
        </select>
    </label>
    <label>Fecha √∫nica: <input type="date" name="fecha_unica_sap"></label>
    <label>Hora: <input type="time" name="hora_sap"></label>
    <label>C√≠clico:
        <select name="ciclico_sap" class="ciclico-select">
            <option value="no">No</option>
            <option value="si">S√≠</option>
        </select>
    </label>
    <div class="ciclico-campos" style="display: none;">
        <label>Hora desde: <input type="time" name="hora_desde_sap"></label>
        <label>Hora hasta: <input type="time" name="hora_hasta_sap"></label>
        <label>Intervalo (minutos): <input type="number" name="intervalo_sap" placeholder="30"></label>
        <label>Desde:
            <select name="desde_sap">
                <option value="">Seleccionar...</option>
                <option value="fin">Fin</option>
                <option value="principio">Principio</option>
            </select>
        </label>
    </div>
    <label>Activo desde: <input type="date" name="activo_desde_sap"></label>
    <label>Activo hasta: <input type="date" name="activo_hasta_sap"></label>
    
    <label>Si tiene dependencias indicar cuales: 
        <textarea name="dependencias_sap" placeholder="JOB.TO.JOB"></textarea>
    </label>
    
    <label>Criticidad:
        <select name="criticidad_sap">
            <option value="">Seleccionar...</option>
            <option value="baja">Baja</option>
            <option value="media">Media</option>
            <option value="alta">Alta</option>
        </select>
    </label>
    
    <div class="section-title">DOCUMENTACI√ìN <span class="requerido">(indicar un √∫nico grupo)</span></div>
    <label>Grupo responsable correo<span class="requerido">(*)</span> <input type="text" name="grupo_responsable_correo_sap" required></label>
    <label>Grupo responsable Service Now: <input type="text" name="grupo_responsable_sn_sap"></label>
    <label>Acci√≥n a seguir si cancela <span class="requerido">(*)-IMPORTANTE!: NO DERIVAR INCIDENTE - CERRAR EN OPERACIONES</span>
        <textarea name="accion_cancela_sap" required></textarea>
    </label>
    <label>Observaciones / Datos Complementarios / Notas 
        <textarea name="observaciones_sap"></textarea>
    </label>
    
    <button type="submit">Guardar</button>
</form>

<!-- FORMULARIO FILE TRANSFER COMPLETO -->
<form id="form-file-transfer" action="/formularios/file-transfer" method="post" class="custom-form" style="display:none;">
    <input type="hidden" name="tipo_job" value="file-transfer">
    <h2>Campo FILE-TRANSFER</h2>
    <button type="button" class="btn-volver" onclick="volverAlPaso3()">Volver</button>
    <label>Tipo de solicitud<span class="requerido">(*)</span>
        <select name="tipo_solicitud_aft">
            <option value="">Seleccionar...</option>
            <option value="alta">Alta</option>
            <option value="baja">Baja</option>
            <option value="modificacion">Modificaci√≥n</option>
        </select>
    </label>
    
    <label>Ambiente<span class="requerido">(*)</span>
        <select name="ambiente_aft">
            <option value="">Seleccionar...</option>
            <option value="desarrollo">Desarrollo</option>
            <option value="testing">Testing</option>
            <option value="produccion">Producci√≥n</option>
        </select>
    </label>
    
    <label>Ticket en Service Now: <input type="text" name="sn_aft"></label>
    <label>Jobname: <input type="text" name="jobname_aft"></label>
    <label>Descripci√≥n del proceso<span class="requerido">(*)</span> <input type="text" name="descripcion_aft"></label>
    <label>Instancia de aplicaci√≥n en SN<span class="requerido">(*)</span> <input type="text" name="instancia_aft"></label>
    
    <div class="section-title">Configuraci√≥n ORIGEN</div>
    <label>Servidor Origen<span class="requerido">(*)</span> <input type="text" name="servidor_origen_aft"></label>
    <label>Carpeta Origen<span class="requerido">(*)</span> <input type="text" name="carpeta_origen_aft"></label>
    <label>Usuario Origen<span class="requerido">(*)</span> <input type="text" name="usuario_origen_aft"></label>
    <label>Archivos a Transmitir<span class="requerido">(*)</span> <input type="text" name="archivos_transmitir_aft"></label>
    
    <div class="section-title">Configuraci√≥n DESTINO</div>
    <label>Servidor Destino <span class="requerido">(*)</span><input type="text" name="servidor_destino_aft"></label>
    <label>Carpeta Destino<span class="requerido">(*)</span> <input type="text" name="carpeta_destino_aft"></label>
    <label>Usuario Destino<span class="requerido">(*)</span> <input type="text" name="usuario_destino_aft"></label>
    <label>Nombre del archivo en Destino<span class="requerido">(*)</span> <input type="text" name="nombre_destino_aft"></label>
    
    <label>Si archivo existe en Destino<span class="requerido">(*)</span>
        <select name="archivo_existe_aft">
            <option value="">Seleccionar...</option>
            <option value="overwrite">OVERWRITE</option>
            <option value="append">APPEND</option>
            <option value="abort">ABORT</option>
            <option value="skip">SKIP</option>
        </select>
    </label>
    
    <label>Copia Recursiva<span class="requerido">(*)</span>
        <select name="copia_recursiva_aft">
            <option value="">Seleccionar...</option>
            <option value="si">S√≠</option>
            <option value="no">No</option>
        </select>
    </label>
    
    <label>Luego de Copia OK<span class="requerido">(*)</span>
        <select name="copia_ok_aft">
            <option value="">Seleccionar...</option>
            <option value="left_as_is">LEFT AS IS</option>
            <option value="delete">DELETE</option>
            <option value="rename">RENAME</option>
        </select>
    </label>
    
    <div class="section-title">Frecuencia de ejecuci√≥n<span class="requerido">(*)</span></div>
    <label>D√≠as de la semana: <input type="text" name="dias_semana_aft"></label>
    <label>D√≠as del mes: <input type="text" name="dias_mes_aft"></label>
    <label>Mes/es:
        <select name="meses_aft">
            <option value="">Todos</option>
            <option value="enero">Enero</option>
            <option value="febrero">Febrero</option>
            <option value="marzo">Marzo</option>
            <option value="abril">Abril</option>
            <option value="mayo">Mayo</option>
            <option value="junio">Junio</option>
            <option value="julio">Julio</option>
            <option value="agosto">Agosto</option>
            <option value="septiembre">Septiembre</option>
            <option value="octubre">Octubre</option>
            <option value="noviembre">Noviembre</option>
            <option value="diciembre">Diciembre</option>
        </select>
    </label>
    <label>Fecha √∫nica: <input type="date" name="fecha_unica_aft"></label>
    <label>Hora: <input type="time" name="hora_aft"></label>
     <label>C√≠clico:
        <select name="ciclico_sap" class="ciclico-select">
            <option value="no">No</option>
            <option value="si">S√≠</option>
        </select>
    </label>
    <div class="ciclico-campos" style="display: none;">
        <label>Hora desde: <input type="time" name="hora_desde_sap"></label>
        <label>Hora hasta: <input type="time" name="hora_hasta_sap"></label>
        <label>Intervalo (minutos): <input type="number" name="intervalo_sap" placeholder="30"></label>
        <label>Desde:
            <select name="desde_sap">
                <option value="">Seleccionar...</option>
                <option value="fin">Fin</option>
                <option value="principio">Principio</option>
            </select>
        </label>
    </div>
    <label>Activo desde: <input type="date" name="activo_desde_aft"></label>
    <label>Activo hasta: <input type="date" name="activo_hasta_aft"></label>
    
    <label>Si tiene dependencias indicar cuales: 
        <textarea name="dependencias_aft" placeholder="JOB.TO.JOB"></textarea>
    </label>
    
    <label>Criticidad:
        <select name="criticidad_aft">
            <option value="">Seleccionar...</option>
            <option value="baja">Baja</option>
            <option value="media">Media</option>
            <option value="alta">Alta</option>
        </select>
    </label>
    
    <div class="section-title">DOCUMENTACI√ìN<span class="requerido">(Indicar un √∫nico grupo)</span></div>
    <label>Grupo responsable correo<span class="requerido">(*)</span> <input type="text" name="grupo_responsable_correo_aft" required></label>
    <label>Grupo responsable Service Now: <input type="text" name="grupo_responsable_sn_aft"></label>
    <label>Acci√≥n a seguir si cancela <span class="requerido">(*)-IMPORTANTE!: NO DERIVAR INCIDENTE - CERRAR EN OPERACIONES</span> 
        <textarea name="accion_cancela_aft" required></textarea>
    </label>
    <label>Observaciones / Datos Complementarios / Notas 
        <textarea name="observaciones_aft"></textarea>
    </label>
    
    <button type="submit">Guardar</button>
</form>

<!-- FORMULARIO DATABASE COMPLETO -->
<form id="form-database" class="custom-form" style="display:none;">
    <h2>Campo DATABASE</h2>
    <button type="button" class="btn-volver" onclick="volverAlPaso3()">Volver</button>
    <label>TIPO DE SOLICITUD <span class="requerido">(*)</span>
        <select name="tipo_solicitud_db" required>
            <option value="">Seleccionar...</option>
            <option value="alta">Alta</option>
            <option value="baja">Baja</option>
            <option value="modificacion">Modificaci√≥n</option>
        </select>
    </label>
    
    <label>AMBIENTE <span class="requerido">(*)</span>
        <select name="ambiente_db" required>
            <option value="">Seleccionar...</option>
            <option value="desarrollo">Desarrollo</option>
            <option value="testing">Testing</option>
            <option value="produccion">Producci√≥n</option>
            <option value="homologacion">Laboratorio</option>
        </select>
    </label>
    
    <label>Ticket en Service Now: <input type="text" name="sn_db"></label>
    <label>JOBNAME: <input type="text" name="jobname_db"></label>
    
    <label>DESCRIPCI√ìN DEL PROCESO <span class="requerido">(*)</span>
        <textarea name="descripcion_db" required placeholder="Ejecuta un Stored Procedure para enviar informacion a la tabla EC_COMPLETACIONES_DETALLE"></textarea>
    </label>
    
    <div class="section-title">Configuraci√≥n de Base de Datos</div>
    
    <label>TIPO DE BD <span class="requerido">(*)</span>
        <select name="tipo_bd" required>
            <option value=""></option>
            <option value="mssql">MSSQL</option>
            <option value="oracle">Oracle</option>
            <option value="db2">DB2</option>
            <option value="mysql">MySQL</option>
            <option value="sybase">Sybase</option>
            <option value="postgresql">PostgreSQL</option>
        </select>
    </label>
    
    <label>VERSION DE BD <span class="requerido">(*)</span>
        <input type="text" name="version_bd" placeholder="10g" required>
    </label>
    <label>Instancia de Aplicaci√≥n en SN<span class="requerido">(*)</span>
        <input type="text" name="version_bd" placeholder="10g" required>
    </label>
    
    <label>SERVIDOR / HOSTNAME <span class="requerido">(*)</span>
        <input type="text" name="servidor_db" placeholder="nombre servidor" required>
    </label>
    
    <label>NOMBRE DE LA BASE DE DATOS <span class="requerido">(*)</span>
        <input type="text" name="nombre_bd" placeholder="nombre base de datos" required>
    </label>
    
    <label>PUERTO<span class="requerido">(*)</span> <input type="text" name="puerto_db" placeholder="ej 1234"></label>
    
    <label>TIPO DE AUTENTICACION <span class="requerido">(*)</span>
        <select name="tipo_auth_db" required>
            <option value=""></option>
            <option value="windows">Windows Authentication</option>
            <option value="sql">SQL Server Authentication</option>
            <option value="ntlm2">NTLM2 Windows Authentication</option>
        </select>
    </label>
    
    <label>USUARIO DE BD <span class="requerido">(*)</span>
        <input type="text" name="usuario_db" placeholder="usuario db" required>
    </label>
    
    <label>TIPO DE EJECUCION <span class="requerido">(*)</span>
        <select name="tipo_ejecucion_db" required>
            <option value=""></option>
            <option value="stored-procedure">STORED PROCEDURE</option>
            <option value="sql-script">SQL Script</option>
            <option value="embedded query">Embedded Query</option>
            <option value="ssis package">SSIS Package</option>
            <option value="mssql agent job">MSSQL Agent Job</option>
        </select>
    </label>
    
    <label>SCHEMA <span class="requerido">(*)</span>
        <input type="text" name="schema_db" placeholder="schema" required>
    </label>
    
    <label>PACKAGE: <input type="text" name="package_db" placeholder="N/A"></label>
    
    <label>NOMBRE STORED PROCEDURE<span class="requerido">(*)</span> <input type="text" name="nombre_sp_db" placeholder="nombre S_P"></label>
    
    <div class="section-title">FRECUENCIA de EJECUCI√ìN <span class="requerido">(*)</span></div>
    
    <label>D√≠as de la Semana: <input type="text" name="dias_semana_db" placeholder="Todos"></label>
    <label>D√≠as del Mes: <input type="text" name="dias_mes_db" placeholder="Todos"></label>
    <label>Mes/es:
        <select name="meses_db">
            <option value="todos">TODOS</option>
            <option value="enero">Enero</option>
            <option value="febrero">Febrero</option>
            <option value="marzo">Marzo</option>
            <option value="abril">Abril</option>
            <option value="mayo">Mayo</option>
            <option value="junio">Junio</option>
            <option value="julio">Julio</option>
            <option value="agosto">Agosto</option>
            <option value="septiembre">Septiembre</option>
            <option value="octubre">Octubre</option>
            <option value="noviembre">Noviembre</option>
            <option value="diciembre">Diciembre</option>
        </select>
    </label>
    <label>Fecha √önica: <input type="date" name="fecha_unica_db"></label>
    <label>Hora: <input type="time" name="hora_db"></label>
    <label>C√çCLICO?
        <select name="ciclico_db" class="ciclico-select">
            <option value="no">NO</option>
            <option value="si">SI</option>
        </select>
    </label>
    <div class="ciclico-campos" style="display: none;">
        <label>Hora Desde: <input type="time" name="hora_desde_db"></label>
        <label>Hora Hasta: <input type="time" name="hora_hasta_db"></label>
        <label>Intervalo: <input type="number" name="intervalo_db"></label>
        <label>Desde:
            <select name="desde_db">
                <option value=""></option>
                <option value="fin">Fin</option>
                <option value="principio">Principio</option>
            </select>
        </label>
    </div>
    
    <label>Activo Desde: <input type="date" name="activo_desde_db"></label>
    <label>Activo Hasta: <input type="date" name="activo_hasta_db"></label>
    
    <label>Si tiene dependencias indicar cuales: 
        <textarea name="dependencias_db"></textarea>
    </label>
    
    <div class="section-title">DOCUMENTACI√ìN <span class="requerido">(Indicar un √∫nico grupo)</span></div>
    
    <label>Grupo Responsable Correo <span class="requerido">(*)</span>
        <input type="text" name="grupo_responsable_correo_db" required>
    </label>
    
    <label>Grupo Responsable Service Now: <input type="text" name="grupo_responsable_sn_db"></label>
    
    <label>Acci√≥n a Seguir si Cancela <span class="requerido">(*MPORTANTE!: NO DERIVAR INCIDENTE - CERRAR EN OPERACIONES)</span>
        <textarea name="accion_cancela_db" required placeholder="IMPORTANTE!: NO DERIVAR INCIDENTE - CERRAR EN OPERACIONES"></textarea>
    </label>
    
    <label>Observaciones / Datos Complementarios / Notas:
        <textarea name="observaciones_db"></textarea>
    </label>
    
    <button type="submit">Guardar</button>
</form>

<!-- FORMULARIO WEBJOB COMPLETO -->
<form id="form-webjob" class="custom-form" style="display:none;">
    <h2>Campo WEBJOB</h2>
    <button type="button" class="btn-volver" onclick="volverAlPaso3()">Volver</button>
    <label>TIPO DE SOLICITUD <span class="requerido">(*)</span>
        <select name="tipo_solicitud_wj" required>
            <option value="">Seleccionar...</option>
            <option value="alta">Alta</option>
            <option value="baja">Baja</option>
            <option value="modificacion">Modificaci√≥n</option>
        </select>
    </label>
    
    <label>AMBIENTE <span class="requerido">(*)</span>
        <select name="ambiente_wj" required>
            <option value="">Seleccionar...</option>
            <option value="produccion">PRODUCCION</option>
            <option value="desarrollo">DESARROLLO</option>
            <option value="testing">TESTING</option>
            <option value="laboratorio">LABORATORIO</option>
        </select>
    </label>
    
    <label>Ticket en Service Now: <input type="text" name="sn_wj"></label>
    <label>JOBNAME: <input type="text" name="jobname_wj"></label>
    
    <label>DESCRIPCI√ìN DEL PROCESO <span class="requerido">(*)</span>
        <textarea name="descripcion_wj" required></textarea>
    </label>
    
    <label>Instancia de Aplicaci√≥n en SN <span class="requerido">(*)</span>
        <input type="text" name="instancia_sn_wj" required>
    </label>

    <label>Nombre del Webjob (Sugerido) 
        <input type="text" name="servidor_wj" required>

    </label>

    <label>Comando a ejecutar <span class="requerido">(*)</span> 
        <select name="command_wj" required>
            <option value=""></option>
            <option value="run">RUN</option>
            <option value="start">START</option>
            <option value="stop">STOP</option>
            <option value="otro">OTRO</option>
        </select>
    </label>

    <label >Si es otro, indicar cual?
        <input type="text" name="otro_command_wj">
    </label>
    
    <div class="section-title">CREDENCIALES DEL CLIENTE</div>
    
    <label>Usuario de Conexi√≥n  <span class="requerido">((Client ID))</span>  <input type="text" name="client_id_wj"></label>
    <label>Clave para acceder <span class="requerido">((Client Secret))</span><input type="password" name="client_secret_wj"></label>
    
    <div class="section-title">FRECUENCIA de EJECUCI√ìN <span class="requerido">(*)</span></div>
    
    <label>D√≠as de la Semana: <input type="text" name="dias_semana_wj"></label>
    <label>D√≠as del Mes: <input type="text" name="dias_mes_wj"></label>
    <label>Mes/es:
        <select name="meses_wj">
            <option value="todos">TODOS</option>
            <option value="enero">Enero</option>
            <option value="febrero">Febrero</option>
            <option value="marzo">Marzo</option>
            <option value="abril">Abril</option>
            <option value="mayo">Mayo</option>
            <option value="junio">Junio</option>
            <option value="julio">Julio</option>
            <option value="agosto">Agosto</option>
            <option value="septiembre">Septiembre</option>
            <option value="octubre">Octubre</option>
            <option value="noviembre">Noviembre</option>
            <option value="diciembre">Diciembre</option>
        </select>
    </label>
    <label>Fecha √önica: <input type="date" name="fecha_unica_wj"></label>
    <label>Hora: <input type="time" name="hora_wj"></label>
    <label>C√çCLICO?
        <select name="ciclico_wj" class="ciclico-select">
            <option value="no">NO</option>
            <option value="si">SI</option>
        </select>
    </label>
    <div class="ciclico-campos" style="display: none;">
        <label>Hora Desde: <input type="time" name="hora_desde_wj"></label>
        <label>Hora Hasta: <input type="time" name="hora_hasta_wj"></label>
        <label>Intervalo: <input type="number" name="intervalo_wj"></label>
        <label>Desde:
            <select name="desde_wj">
                <option value=""></option>
                <option value="fin">Fin</option>
                <option value="principio">Principio</option>
            </select>
        </label>
    </div>
    
    <label>Activo Desde: <input type="date" name="activo_desde_wj"></label>
    <label>Activo Hasta: <input type="date" name="activo_hasta_wj"></label>
    <label>Criticidad:
        <select name="criticidad_wj">
            <option value=""></option>
            <option value="baja">Baja</option>
            <option value="media">Media</option>
            <option value="alta">Alta</option>
        </select>
    </label>
    <label>Si tiene dependencias indicar cuales: <textarea name="dependencias_wj"></textarea></label>
    
    <div class="section-title">DOCUMENTACI√ìN <span class="requerido"> (Indicar un √∫nico grupo)</span>
       </div>
    
    <label>Grupo Responsable Correo <span class="requerido">(*)</span>
        <input type="text" name="grupo_responsable_correo_wj" required>
    </label>
    <label>Grupo Responsable Service Now: <input type="text" name="grupo_responsable_sn_wj"></label>
    <label>Acci√≥n a Seguir si Cancela <span class="requerido">(*) IMPORTANTE : NO DERIVAR INCIDENTE - CERRAR EN OPERACIONES</span>
        <textarea name="accion_cancela_wj" required></textarea>
    </label>
    <label>Observaciones / Datos Complementarios / Notas:
        <textarea name="observaciones_wj"></textarea>
    </label>
    
    <button type="submit">Guardar</button>
</form>

<!-- FORMULARIO MASIVA CON CAMPOS DIN√ÅMICOS -->
<form id="form-masiva" class="custom-form" style="display:none;">
    <h2>MASIVA - Agregar m√∫ltiples jobs</h2>
    <button type="button" class="btn-volver" onclick="volverAlPaso3()">Volver</button>
    <label>TIPO DE SOLICITUD <span class="requerido">(*)</span>
        <select name="tipo_solicitud_masiva" required>
            <option value="">Seleccionar...</option>
            <option value="alta">Alta</option>
            <option value="baja">Baja</option>
            <option value="modificacion">Modificaci√≥n</option>
        </select>
    </label>
    
    <label>AMBIENTE <span class="requerido">(*)</span>
        <select name="ambiente_masiva" required>
            <option value="">Seleccionar...</option>
            <option value="desarrollo">Desarrollo</option>
            <option value="testing">Testing</option>
            <option value="produccion">Producci√≥n</option>
            <option value="laboratorio">Laboratorio</option>
        </select>
    </label>
    
    <div class="section-title">üìã Jobs a procesar</div>
    
    <div class="campos-dinamicos" id="contenedor-jobs">
        <div class="fila-dinamica">
            <input type="text" name="jobname[]" placeholder="Nombre Job *" required>
            <input type="text" name="descripcion[]" placeholder="Descripci√≥n">
            <input type="text" name="servidor[]" placeholder="Servidor">
            <input type="text" name="usuario[]" placeholder="Usuario">
            <button type="button" class="btn-eliminar" onclick="eliminarFila(this)">‚ùå</button>
        </div>
    </div>
    
    <button type="button" class="btn-agregar" onclick="agregarJob()">‚ûï Agregar otro Job</button>
    
    <div class="section-title">DOCUMENTACI√ìN</div>
    <label>Grupo Responsable Correo <span class="requerido">(*)</span>
        <input type="text" name="grupo_responsable_correo_masiva" required>
    </label>
    <label>Observaciones: <textarea name="observaciones_masiva"></textarea></label>
    
    <button type="submit">Guardar Todos</button>
</form>

<script>
// VARIABLES GLOBALES PARA EL SISTEMA DE PASOS
let seleccion = {
    tipoSolicitud: '',
    ambiente: '',
    tipoJob: ''
};

// FUNCIONES PARA NAVEGACI√ìN POR PASOS
function seleccionarTipoSolicitud(tipo) {
    seleccion.tipoSolicitud = tipo;
    document.getElementById('tipo-selected').textContent = tipo.toUpperCase();
    document.getElementById('tipo-selected-2').textContent = tipo.toUpperCase();
    
    document.getElementById('paso-1').style.display = 'none';
    document.getElementById('paso-2').style.display = 'block';
}

function seleccionarAmbiente(ambiente) {
    seleccion.ambiente = ambiente;
    document.getElementById('ambiente-selected').textContent = ambiente.toUpperCase();
    
    document.getElementById('paso-2').style.display = 'none';
    document.getElementById('paso-3').style.display = 'block';
}
function volverAlPaso3() {
    // Ocultar todos los formularios
    const forms = document.querySelectorAll('.custom-form');
    forms.forEach(form => form.style.display = 'none');
    
    // Ocultar todos los pasos
    document.getElementById('paso-1').style.display = 'none';
    document.getElementById('paso-2').style.display = 'none';
    document.getElementById('paso-3').style.display = 'none';
    
    // Ocultar resumen
    document.getElementById('resumen-seleccion').classList.remove('visible');
    
    // Reiniciar todo
    seleccion = { tipoSolicitud: '', ambiente: '', tipoJob: '' };
    
    // Volver al paso 1
    document.getElementById('paso-1').style.display = 'block';
    window.scrollTo({ top: 0, behavior: 'smooth' });
}

function seleccionarJob(tipoJob) {
    seleccion.tipoJob = tipoJob;
    
    document.getElementById('paso-3').style.display = 'none';
    
    // Mostrar resumen
    const resumen = document.getElementById('resumen-seleccion');
    resumen.classList.add('visible');
    
    // Llenar datos del resumen
    const nombresJobs = {
        'os': 'Script / CMD',
        'sap': 'SAP',
        'file-transfer': 'File Transfer',
        'database': 'Database',
        'webjob': 'WebJob',
        'masiva': 'Masiva'
    };
    
    document.getElementById('resumen-tipo').textContent = seleccion.tipoSolicitud;
    document.getElementById('resumen-ambiente').textContent = seleccion.ambiente;
    document.getElementById('resumen-job').textContent = nombresJobs[tipoJob] || tipoJob;
    
    const form = document.getElementById('form-' + tipoJob);
    if (form) {
        form.style.display = 'block';
        
        const selectTipo = form.querySelector('[name^="tipo_solicitud"]');
        const selectAmbiente = form.querySelector('[name^="ambiente"]');
        
        if (selectTipo) selectTipo.value = seleccion.tipoSolicitud;
        if (selectAmbiente) selectAmbiente.value = seleccion.ambiente;
        
        // Scroll al resumen primero
        resumen.scrollIntoView({ behavior: 'smooth', block: 'start' });
        
        inicializarCiclico(form);
    }
}

function volverPaso(numeroPaso) {
    document.getElementById('paso-1').style.display = 'none';
    document.getElementById('paso-2').style.display = 'none';
    document.getElementById('paso-3').style.display = 'none';
    
    const forms = document.querySelectorAll('.custom-form');
    forms.forEach(form => form.style.display = 'none');
    
    document.getElementById('paso-' + numeroPaso).style.display = 'block';
    
    if (numeroPaso === 1) {
        seleccion = { tipoSolicitud: '', ambiente: '', tipoJob: '' };
    } else if (numeroPaso === 2) {
        seleccion.tipoJob = '';
    }
}

document.addEventListener('DOMContentLoaded', function() {
    const select = document.getElementById('lista-jobs');
    const forms = {
        'os': document.getElementById('form-os'),
        'sap': document.getElementById('form-sap'),
        'file-transfer': document.getElementById('form-file-transfer'),
        'database': document.getElementById('form-database'),
        'webjob': document.getElementById('form-webjob'),
        'masiva': document.getElementById('form-masiva')
    };

    function inicializarCiclico(form) {
        const selectCiclico = form.querySelector('.ciclico-select');
        const campos = form.querySelector('.ciclico-campos');
        if (!selectCiclico || !campos) return;

        function toggleCampos() {
            campos.style.display = selectCiclico.value === 'si' ? 'block' : 'none';
        }

        selectCiclico.addEventListener('change', toggleCampos);
        toggleCampos();
    }

    select.addEventListener('change', function() {
        for (const key in forms) {
            if (forms[key]) forms[key].style.display = 'none';
        }

        const formSeleccionado = forms[this.value];
        if (formSeleccionado) {
            formSeleccionado.style.display = 'block';
            inicializarCiclico(formSeleccionado);
        }
    });

    for (const key in forms) {
        if (forms[key]) inicializarCiclico(forms[key]);
    }
});
// FUNCIONES PARA MASIVA
let contadorJobs = 1;

function agregarJob() {
    contadorJobs++;
    if (contadorJobs > 50) {
        alert('M√°ximo 50 jobs');
        return;
    }
    
    const contenedor = document.getElementById('contenedor-jobs');
    const nuevaFila = document.createElement('div');
    nuevaFila.className = 'fila-dinamica';
    nuevaFila.innerHTML = `
        <input type="text" name="jobname[]" placeholder="Nombre Job *" required>
        <input type="text" name="descripcion[]" placeholder="Descripci√≥n">
        <input type="text" name="servidor[]" placeholder="Servidor">
        <input type="text" name="usuario[]" placeholder="Usuario">
        <button type="button" class="btn-eliminar" onclick="eliminarFila(this)">‚ùå</button>
    `;
    contenedor.appendChild(nuevaFila);
}

function eliminarFila(boton) {
    const fila = boton.parentElement;
    const contenedor = document.getElementById('contenedor-jobs');
    const totalFilas = contenedor.querySelectorAll('.fila-dinamica').length;
    if (totalFilas <= 1) {
        alert('Debe haber al menos un job');
        return;
    }
    fila.remove();
    contadorJobs--;
}

console.log('‚úÖ Control-M cargado');

</script>

</body>
</html>